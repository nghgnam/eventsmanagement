"use strict";(self.webpackChunkdonate_blood_project=self.webpackChunkdonate_blood_project||[]).push([[643],{6643:(P,g,t)=>{t.r(g),t.d(g,{FollowingOrganizersComponent:()=>C});var s=t(177),c=t(3409),d=t(8359),p=t(2910),n=t(6276),f=t(199),_=t(7355),u=t(5119);function m(i,a){1&i&&(n.j41(0,"div",6),n.nrm(1,"div",7),n.j41(2,"p"),n.EFF(3,"Loading organizers..."),n.k0s()())}function h(i,a){1&i&&(n.j41(0,"div",8),n.nrm(1,"i",9),n.j41(2,"h3"),n.EFF(3,"No followed organizers"),n.k0s(),n.j41(4,"p"),n.EFF(5,"Start following organizers to see their events here"),n.k0s(),n.j41(6,"button",10),n.EFF(7,"Discover Organizers"),n.k0s()())}function x(i,a){if(1&i){const o=n.RV6();n.j41(0,"img",26),n.bIt("error",function(r){n.eBV(o);const l=n.XpG(4);return n.Njj(l.handleImageError(r))}),n.k0s()}if(2&i){const o=a.ngIf,e=n.XpG(2).$implicit;n.Y8G("src",o,n.B4B)("alt",e.organizer.fullName)}}function z(i,a){if(1&i&&(n.j41(0,"span",27),n.EFF(1),n.nI1(2,"date"),n.k0s()),2&i){const o=n.XpG(2).$implicit;n.R7$(1),n.SpI(" Followed since: ",n.i5U(2,1,o.follow_date,"mediumDate")," ")}}function O(i,a){if(1&i&&(n.j41(0,"div",18)(1,"div",19),n.DNE(2,x,1,2,"img",20),n.k0s(),n.j41(3,"div",21)(4,"h3"),n.EFF(5),n.k0s(),n.j41(6,"p",22),n.EFF(7),n.k0s(),n.j41(8,"div",23)(9,"span",24),n.EFF(10),n.k0s(),n.DNE(11,z,3,4,"span",25),n.k0s()()()),2&i){const o=n.XpG().$implicit,e=n.XpG(2);n.R7$(2),n.Y8G("ngIf",e.getSafeImageUrl(o.organizer.profileImage)),n.R7$(3),n.JRh(o.organizer.fullName),n.R7$(2),n.JRh((null==o.organizer.organization?null:o.organizer.organization.companyName)||"No company name"),n.R7$(2),n.AVh("active","active"===o.status),n.R7$(1),n.JRh(o.status),n.R7$(1),n.Y8G("ngIf",o.follow_date)}}function v(i,a){if(1&i){const o=n.RV6();n.j41(0,"div",13),n.DNE(1,O,12,7,"div",14),n.j41(2,"div",15)(3,"button",16),n.bIt("click",function(){const l=n.eBV(o).$implicit,M=n.XpG(2);return n.Njj(M.unfollowOrganizer(l.id))}),n.nrm(4,"i",17),n.EFF(5," Unfollow "),n.k0s()()()}if(2&i){const o=a.$implicit;n.R7$(1),n.Y8G("ngIf",o.organizer)}}function w(i,a){if(1&i&&(n.j41(0,"div",11),n.DNE(1,v,6,1,"div",12),n.k0s()),2&i){const o=n.XpG();n.R7$(1),n.Y8G("ngForOf",o.followedOrganizers)}}let C=(()=>{class i{usersService;authService;sanitizerService;followedOrganizers=[];isLoading=!0;subscriptions=[];currentUser=null;defaultAvatar="assets/images/default-avatar.png";constructor(o,e,r){this.usersService=o,this.authService=e,this.sanitizerService=r}ngOnInit(){const o=p.j.onAuthStateChanged(e=>{e?this.usersService.getCurrentUserById(e.uid).subscribe(r=>{r?(this.currentUser=r,this.loadFollowedOrganizers()):(console.warn("No user data found"),this.isLoading=!1)}):(console.warn("No authenticated user found"),this.isLoading=!1)});this.subscriptions.push(new d.yU(()=>o()))}getSafeImageUrl(o){return this.sanitizerService.sanitizeImageUrl(o)}handleImageError(o){o.target.src=this.defaultAvatar}loadFollowedOrganizers(){if(!this.currentUser?.id)return console.warn("No current user found"),void(this.isLoading=!1);console.log("Loading follows for user:",this.currentUser.id),this.isLoading=!0;const o=this.usersService.getFollowedOrganizers(this.currentUser.id).subscribe({next:e=>{console.log("Received follows:",e),e&&0!==e.length?(console.log("Processing follows:",e.length),this.followedOrganizers=e.filter(r=>!!r.organizer||(console.warn("Follow missing organizer data:",r.id),!1)),console.log("Filtered follows:",this.followedOrganizers.length)):console.log("No follows found"),this.isLoading=!1},error:e=>{console.error("Error loading follows:",e),this.isLoading=!1}});this.subscriptions.push(o)}unfollowOrganizer(o){if(!o)return void console.warn("Cannot unfollow: no follow ID provided");this.isLoading=!0;const e=this.usersService.unfollowOrganizer(o).subscribe({next:()=>{console.log("Successfully unfollowed:",o),this.followedOrganizers=this.followedOrganizers.filter(r=>r.id!==o),this.isLoading=!1},error:r=>{console.error("Error unfollowing organizer:",r),this.isLoading=!1}});this.subscriptions.push(e)}ngOnDestroy(){this.subscriptions.forEach(o=>o.unsubscribe())}static \u0275fac=function(e){return new(e||i)(n.rXU(f.g),n.rXU(_.u),n.rXU(u.o))};static \u0275cmp=n.VBU({type:i,selectors:[["app-following-organizers"]],standalone:!0,features:[n.aNF],decls:9,vars:3,consts:[[1,"following-organizers"],[1,"section-header"],[1,"section-description"],["class","loading-container",4,"ngIf"],["class","no-organizers",4,"ngIf"],["class","organizers-grid",4,"ngIf"],[1,"loading-container"],[1,"loading-spinner"],[1,"no-organizers"],[1,"fas","fa-users"],["routerLink","/body",1,"btn-primary"],[1,"organizers-grid"],["class","organizer-card",4,"ngFor","ngForOf"],[1,"organizer-card"],["class","organizer-info",4,"ngIf"],[1,"organizer-actions"],[1,"unfollow-btn",3,"click"],[1,"fas","fa-user-minus"],[1,"organizer-info"],[1,"organizer-avatar-container"],["class","organizer-avatar",3,"src","alt","error",4,"ngIf"],[1,"organizer-details"],[1,"company-name"],[1,"follow-info"],[1,"status"],["class","follow-date",4,"ngIf"],[1,"organizer-avatar",3,"src","alt","error"],[1,"follow-date"]],template:function(e,r){1&e&&(n.j41(0,"div",0)(1,"div",1)(2,"h2"),n.EFF(3,"Following Organizers"),n.k0s(),n.j41(4,"p",2),n.EFF(5,"Manage your followed organizers and stay updated with their events"),n.k0s()(),n.DNE(6,m,4,0,"div",3),n.DNE(7,h,8,0,"div",4),n.DNE(8,w,2,1,"div",5),n.k0s()),2&e&&(n.R7$(6),n.Y8G("ngIf",r.isLoading),n.R7$(1),n.Y8G("ngIf",!r.isLoading&&0===r.followedOrganizers.length),n.R7$(1),n.Y8G("ngIf",!r.isLoading&&r.followedOrganizers.length>0))},dependencies:[s.MD,s.Sq,s.bT,s.vh,c.iI,c.Wk],styles:[".following-organizers[_ngcontent-%COMP%]{padding:20px;max-width:1200px;margin:0 auto}.section-header[_ngcontent-%COMP%]{margin-bottom:30px;text-align:center;padding:0 15px}.section-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:28px;color:#333;margin-bottom:10px;line-height:1.2}.section-description[_ngcontent-%COMP%]{color:#666;font-size:16px;max-width:600px;margin:0 auto;line-height:1.5}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:40px}.loading-spinner[_ngcontent-%COMP%]{border:4px solid #f3f3f3;border-top:4px solid #3498db;border-radius:50%;width:40px;height:40px;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-bottom:10px}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.no-organizers[_ngcontent-%COMP%]{text-align:center;padding:40px;color:#666;background:#f8f9fa;border-radius:8px;margin:20px 0}.no-organizers[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:48px;margin-bottom:16px;color:#ccc}.no-organizers[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:24px;margin-bottom:10px;color:#333}.no-organizers[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:20px}.btn-primary[_ngcontent-%COMP%]{background:#3498db;color:#fff;border:none;padding:10px 20px;border-radius:4px;cursor:pointer;font-size:16px;transition:background .2s}.btn-primary[_ngcontent-%COMP%]:hover{background:#2980b9}.organizers-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:20px}.organizer-card[_ngcontent-%COMP%]{background:white;border-radius:12px;box-shadow:0 2px 8px #0000001a;padding:20px;display:flex;flex-direction:column;gap:15px;transition:transform .2s,box-shadow .2s}.organizer-card[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #00000026}.organizer-info[_ngcontent-%COMP%]{display:flex;gap:15px}.organizer-avatar-container[_ngcontent-%COMP%]{position:relative;width:80px;height:80px;flex-shrink:0}.organizer-avatar[_ngcontent-%COMP%]{width:100%;height:100%;border-radius:50%;object-fit:cover;border:3px solid #fff;box-shadow:0 2px 4px #0000001a}.organizer-details[_ngcontent-%COMP%]{flex:1;min-width:0}.organizer-details[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 5px;font-size:18px;color:#333;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.company-name[_ngcontent-%COMP%]{margin:0 0 5px;color:#666;font-size:14px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.follow-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:5px;margin-top:10px}.status[_ngcontent-%COMP%]{display:inline-block;padding:4px 12px;border-radius:12px;font-size:12px;background:#e9ecef;color:#666;text-transform:capitalize}.status.active[_ngcontent-%COMP%]{background:#28a745;color:#fff}.follow-date[_ngcontent-%COMP%]{font-size:12px;color:#666}.organizer-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.unfollow-btn[_ngcontent-%COMP%]{background:#dc3545;color:#fff;border:none;padding:8px 16px;border-radius:4px;cursor:pointer;display:flex;align-items:center;gap:8px;transition:background .2s;font-size:14px}.unfollow-btn[_ngcontent-%COMP%]:hover{background:#c82333}.unfollow-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px}@media (max-width: 768px){.organizers-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.organizer-card[_ngcontent-%COMP%]{padding:15px}.organizer-avatar-container[_ngcontent-%COMP%]{width:60px;height:60px}.following-organizers[_ngcontent-%COMP%]{padding:15px}.section-header[_ngcontent-%COMP%]{margin-bottom:20px}.section-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:24px}.section-description[_ngcontent-%COMP%]{font-size:14px;padding:0 10px}}@media (max-width: 480px){.following-organizers[_ngcontent-%COMP%]{padding:10px}.section-header[_ngcontent-%COMP%]{margin-bottom:15px}.section-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:20px}.section-description[_ngcontent-%COMP%]{font-size:13px}}"]})}return i})()}}]);
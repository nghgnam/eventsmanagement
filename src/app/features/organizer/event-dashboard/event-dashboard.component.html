<div class="event-dashboard-container">
  <div class="container">
    @if (event) {
      <!-- Dashboard Header -->
      <div class="dashboard-header">
        <div>
          <h1>{{ event.name }}</h1>
          <p class="event-date">{{ getEventStartDate() | date:'full' }}</p>
        </div>
        <div class="header-actions">
          <button class="btn-secondary" (click)="exportAttendees()">
            <i class="fa-solid fa-download"></i> Export Data
          </button>
        </div>
      </div>

      <!-- Sales Overview -->
      <div class="sales-overview">
        <div class="stat-card">
          <h3>Total Sales</h3>
          <p class="stat-value">${{ totalSales }}</p>
        </div>
        <div class="stat-card">
          <h3>Tickets Sold</h3>
          <p class="stat-value">{{ totalTicketsSold }}</p>
        </div>
        <div class="stat-card">
          <h3>Revenue</h3>
          <p class="stat-value">${{ totalRevenue }}</p>
        </div>
        <div class="stat-card">
          <h3>Check-ins</h3>
          <p class="stat-value">{{ checkedInCount }} / {{ totalTicketsSold }}</p>
        </div>
      </div>

      <!-- Sales Chart -->
      <div class="chart-section">
        <h2>Sales Over Time</h2>
        <div class="chart-container">
          <!-- TODO: Implement chart (Chart.js, ng2-charts, etc.) -->
          <p>Sales chart will be displayed here</p>
        </div>
      </div>

      <!-- Attendees List -->
      <div class="attendees-section">
        <div class="section-header">
          <h2>Attendees</h2>
          <div class="filters">
            <input 
              type="text" 
              [(ngModel)]="searchQuery" 
              placeholder="Search attendees..."
              (input)="filterAttendees()">
            <select [(ngModel)]="filterStatus" (change)="filterAttendees()">
              <option value="all">All</option>
              <option value="checked-in">Checked In</option>
              <option value="not-checked-in">Not Checked In</option>
            </select>
          </div>
        </div>

        <div class="attendees-list">
          @if (attendees.length > 0) {
            <table class="attendees-table">
              <thead>
                <tr>
                  <th>Name</th>
                  <th>Email</th>
                  <th>Ticket Type</th>
                  <th>Purchase Date</th>
                  <th>Status</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody>
                @for (attendee of attendees; track attendee.id) {
                  <tr>
                    <td>{{ attendee.name }}</td>
                    <td>{{ attendee.email }}</td>
                    <td>{{ attendee.ticketType }}</td>
                    <td>{{ attendee.purchaseDate | date }}</td>
                    <td>
                      <span [class]="'status-' + (attendee.checkedIn ? 'checked-in' : 'pending')">
                        {{ attendee.checkedIn ? 'Checked In' : 'Pending' }}
                      </span>
                    </td>
                    <td>
                      <button class="btn-link" (click)="viewAttendeeDetails(attendee.id)">
                        View Details
                      </button>
                    </td>
                  </tr>
                }
              </tbody>
            </table>
          } @else {
            <div class="empty-state">
              <p>No attendees found</p>
            </div>
          }
        </div>
      </div>
    } @else {
      <div class="loading">Loading dashboard...</div>
    }
  </div>
</div>



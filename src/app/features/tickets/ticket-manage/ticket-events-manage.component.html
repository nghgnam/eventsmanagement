@if (currentUser) {
  <div class="user_infomation_container">
    <div class="container">
      <aside class="sidebar">
        <h2 class="logo">nhnam</h2>
        @if (user) {
          <div class="user-info">
            @if (getSafeUrl(user.profile.avatar || undefined); as safeUrl) {
              <img [src]="safeUrl || 'https://res.cloudinary.com/dpiqldk0y/image/upload/v1744575077/default-avatar_br3ffh.png'" alt="User Avatar" class="avatar">
            }
            <div>
              <p class="username">{{user.profile.fullName}}</p>
              <p class="role">{{user.account.type}}</p>
            </div>
          </div>
        }
        <nav class="menu">
          <ul>
            <li [class.active]="changeTab === 'tab1'" (click)="changeTabSelected('tab1')">Active Tickets</li>
            <li [class.active]="changeTab === 'tab2'" (click)="changeTabSelected('tab2')">Unpaid Tickets</li>
            <li [class.active]="changeTab === 'tab3'" (click)="changeTabSelected('tab3')">Used Tickets</li>
            <li [class.active]="changeTab === 'tab4'" (click)="changeTabSelected('tab4')">Expired Tickets</li>
            <li [class.active]="changeTab === 'tab5'" (click)="changeTabSelected('tab5')">Cancelled Tickets</li>
          </ul>
        </nav>
      </aside>

      <main class="main-content">
        @if (isLoading) {
          <div class="loading">
            <p>Loading your tickets...</p>
          </div>
        }

        @if (error) {
          <div class="error">
            <p>{{error}}</p>
          </div>
        }

        @if (!isLoading && !error) {
          <div class="tab-content">
            @if (changeTab === 'tab1') {
              <div class="card" @tabAnimation>
                <app-tab-content-tickets 
                  [dataEvent]="eventUpcoming"
                  [mode]="'single'"
                  [dataTicket]="ticket"
                  sectionHeader="Active Tickets"
                  subsectionHeader="These are the tickets you have purchased and are currently active.">
                </app-tab-content-tickets>
              </div>
            }
            @if (changeTab === 'tab2') {
              <div class="card" @tabAnimation>
                <app-tab-content-tickets 
                  [dataEvent]="{valid: eventUnpaidValid, expired: eventUnpaidExpired}"
                  [mode]="'multiple'"
                  [dataTicket]="ticket"
                  sectionHeader="Unpaid Tickets"
                  subsectionHeader="These are the tickets you have purchased but have not yet paid for.">
                </app-tab-content-tickets>
              </div>
            }
            @if (changeTab === 'tab3') {
              <div class="card" @tabAnimation>
                <app-tab-content-tickets 
                  [dataEvent]="eventUsed"
                  [mode]="'single'"
                  [dataTicket]="ticket"
                  sectionHeader="Used Tickets"
                  subsectionHeader="These are the tickets you have purchased and have already used.">
                </app-tab-content-tickets>
              </div>
            }
            @if (changeTab === 'tab4') {
              <div class="card" @tabAnimation>
                <app-tab-content-tickets 
                  [dataEvent]="eventPart" 
                  [mode]="'single'"
                  [dataTicket]="ticket"
                  sectionHeader="Expired Tickets"
                  subsectionHeader="These are the tickets you have purchased but are no longer valid.">
                </app-tab-content-tickets>
              </div>
            }
            @if (changeTab === 'tab5') {
              <div class="card" @tabAnimation>
                <app-tab-content-tickets 
                  [dataEvent]="eventCancel" 
                  [mode]="'single'"
                  [dataTicket]="ticket"
                  sectionHeader="Cancelled Tickets"
                  subsectionHeader="These are the tickets you have purchased but have been cancelled.">
                </app-tab-content-tickets>
              </div>
            }
          </div>
        }
      </main>
    </div>
  </div>
}
<!-- <div class="layout"></div> -->
